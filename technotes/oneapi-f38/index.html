<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">


<title>Installing oneAPI on Fedora &#8211; Ian McInerney</title>
<meta name="description" content="While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories.
">
<meta name="keywords" content="">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Installing oneAPI on Fedora">
<meta name="twitter:description" content="While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories.
">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Installing oneAPI on Fedora">
<meta property="og:description" content="While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories.
">
<meta property="og:url" content="/technotes/oneapi-f38/">
<meta property="og:site_name" content="Ian McInerney">

<meta property="og:image" content="/images/default-thumb.png">


<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="sNKIqFj27iemOFAuKFdpu_3ToTkm41gcB1vy3ZzbGk4">



<link rel="canonical" href="/technotes/oneapi-f38/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Ian McInerney Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/academicons/css/academicons.css"/>
<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">


<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

<script
  type="text/javascript"
  src="https://use.fontawesome.com/releases/v5.15.1/js/conflict-detection.js">
</script>

<!--Jekyll-seo plugin-->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Installing oneAPI on Fedora | Ian McInerney</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Installing oneAPI on Fedora" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories." />
<meta property="og:description" content="While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories." />
<link rel="canonical" href="https://ism.engineer/technotes/oneapi-f38/" />
<meta property="og:url" content="https://ism.engineer/technotes/oneapi-f38/" />
<meta property="og:site_name" content="Ian McInerney" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-07-17T16:14:23+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Installing oneAPI on Fedora" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-07-17T16:14:23+00:00","datePublished":"2024-07-17T16:14:23+00:00","description":"While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories.","headline":"Installing oneAPI on Fedora","mainEntityOfPage":{"@type":"WebPage","@id":"https://ism.engineer/technotes/oneapi-f38/"},"url":"https://ism.engineer/technotes/oneapi-f38/"}</script>
<!-- End Jekyll SEO tag -->


</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<div class="grid-top">
			<div class="grid-name">
				<h3 itemprop="name" class="author-name">Ian McInerney</h3>
			</div>
			<div class="grid-links">
				<a href="mailto:ian.s.mcinerney@ieee.org" class="social-links" target="_blank"><i class="fas fa-fw fa-envelope-square"></i></a>
				
				<a href="https://scholar.google.com/citations?user=FhYROr4AAAAJ" class="social-links" target="_blank"><i class="ai ai-fw ai-google-scholar"></i></a>
				<a href="https://arxiv.com/a/mcinerney_i_1" class="social-links" target="_blank"><i class="ai ai-fw ai-arxiv"></i></a>
				<a href="https://orcid.org/0000-0003-2616-9771" class="social-links" target="_blank"><i class="ai ai-fw ai-orcid"></i></a>
				<a href="https://linkedin.com/in/ian-mcinerney-933772123" class="social-links" target="_blank"><i class="fab fa-fw fa-linkedin"></i></a>
				<a href="https://github.com/imciner2" class="social-links" target="_blank"><i class="fab fa-fw fa-github"></i></a>
				<a href="https://gitlab.com/imcinerney" class="social-links" target="_blank"><i class="fab fa-fw fa-gitlab"></i></a>
			</div>
			<div class="grid-photo">
				
					<img src="/images/headshot.jpg" class="bio-photo" alt="Ian McInerney photo">
				
			</div>
			<div class="grid-menu">
				<nav role="navigation" id="site-nav" class="nav">
				    <ul>
				        
						    
						    <li><a href="/" >Home</a></li>
						
						    
						    <li><a href="/research/" >Research</a></li>
						
						    
						    <li><a href="/publications/" >Publications</a></li>
						
						    
						    <li><a href="/software/" >Software</a></li>
						
						    
						    <li><a href="/presentations/" >Presentations</a></li>
						
						    
						    <li><a href="/technotes" >Technotes</a></li>
						
				    </ul>
				</nav>
			</div>
		</div>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->




<div id="main" role="main">
  <div class="article-author-side">
    

<div itemscope itemtype="https://schema.org/Person">


	<img src="/images/headshot.jpg" class="bio-photo" alt="Ian McInerney photo">


  <h3 itemprop="name">Ian McInerney</h3>
  <p>Research software engineer, Vibration UTC at Imperial College London</p>
  <a href="mailto:ian.s.mcinerney@ieee.org" class="author-social" target="_blank"><i class="fas fa-fw fa-envelope-square"></i> Email</a>
  
  
  <a href="https://scholar.google.com/citations?user=FhYROr4AAAAJ" class="author-social" target="_blank"><i class="ai ai-fw ai-google-scholar"></i> Google Scholar</a>
  <a href="https://arxiv.com/a/mcinerney_i_1" class="author-social" target="_blank"><i class="ai ai-fw ai-arxiv"></i> Arxiv</a>
  <a href="https://orcid.org/0000-0003-2616-9771" class="author-social" target="_blank"><i class="ai ai-fw ai-orcid"></i> ORCID</a>
  <a href="https://dblp.org/pid/213/3009.html" class="author-social" target="_blank"><i class="ai ai-fw ai-dblp"></i> dblp</a>
  <a href="https://www.zotero.org/imcinerney" class="author-social" target="_blank"><i class="ai ai-fw ai-zotero"></i> Zotero</a>
  <a href="https://linkedin.com/in/ian-mcinerney-933772123" class="author-social" target="_blank"><i class="fab fa-fw fa-linkedin"></i> LinkedIn</a>
  
  
  
  <a href="https://github.com/imciner2" class="author-social" target="_blank"><i class="fab fa-fw fa-github"></i> Github</a>
  <a href="https://gitlab.com/imcinerney" class="author-social" target="_blank"><i class="fab fa-fw fa-gitlab"></i> Gitlab</a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <a rel="me" href="https://mathstodon.xyz/@imcinerney" class="author-social" target="_blank"><i class="fab fa-fw fa-mastodon"></i> Mastodon</a>
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/technotes/oneapi-f38/" rel="bookmark" title="Installing oneAPI on Fedora">Installing oneAPI on Fedora</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>While Intel does not officially support Fedora with their oneAPI packages, they do provide RPM packages via yum/dnf repositories.</p>

<h1 id="repository-configuration">Repository configuration</h1>

<p>For Fedora versions prior to Fedora 38 (e.g. Fedora 37 and before), the standard <a href="https://www.intel.com/content/www/us/en/docs/oneapi/installation-guide-linux/2023-1/yum-dnf-zypper.html" target="_blank">Intel instructions</a> will work for installing oneAPI packages</p>

<h1 id="preventing-library-issues">Preventing library issues</h1>

<p>As more parts of the oneAPI ecosystem become open source under permissive licenses, oneAPI libraries are being added to the main Fedora repository and being used as dependencies for Fedora packages.
For example, the <code class="language-plaintext highlighter-rouge">oidn-libs</code> package in the Fedora repository contains libraries that are also provided by the oneAPI repository <code class="language-plaintext highlighter-rouge">intel-oneapi-oidn-*</code> pacakges, so adding the oneAPI repository alongside the main Fedora repository can lead to DNF choosing to install the Intel-provided packages containing the libraries instead of the Fedora ones.</p>

<p>DNF installing the Intel packages instead of the Fedora packages is problematic because the Intel packages install the libraries in different directories (e.g. subfolders of <code class="language-plaintext highlighter-rouge">/opt/intel/oneapi</code>), so they are not automatically on the search path and so using them requires adding them to the search path manually.
This leads to DNF thinking all necessary libraries have been installed, but programs not starting due to missing shared libraries.</p>

<p>To fix this, the oneAPI repository should be added with a priority level below the Fedora repository.
Since DNF uses a default priority of 99 and lower priority numbers indicate a higher priority repository, setting the priority level for the oneAPI level to 150 will cause DNF to choose the Fedora packages over the Intel-provided packages when there is a choice.
This is done by adding</p>

<div id="code-oneapipriority" class="codeblock">
<pre>
priority=150
</pre>
</div>

<p>to the <code class="language-plaintext highlighter-rouge">/etc/yum.repos.d/oneAPI.repo</code> file containing the repository configuration.</p>

<h1 id="post-fedora-38">Post-Fedora 38</h1>

<p>Starting in Fedora 38, RPM has <a href="https://fedoraproject.org/wiki/Changes/RpmSequoia" target="_blank">switched</a> its cryptographic library to a new one called <code class="language-plaintext highlighter-rouge">rpm-sequoia</code>.
This change unfortuently leads to several issues using the Intel oneAPI repository</p>

<h2 id="repository-gpg-key">Repository GPG Key</h2>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Intel has generated a new GPG key for the repository, so this workaround is no longer necessary.</div>

<p>The first issue with the oneAPI repository is a GPG key failure with the error:</p>

<div id="code-certissue" class="codeblock">
<pre>
error: Certificate 1A8497B11911E097:
  The certificate is expired: The primary key is not live
</pre>
</div>

<p>To work around this issue, disable the GPG checks for the Intel repository in the <code class="language-plaintext highlighter-rouge">/etc/yum.repos.d/oneAPI.repo</code> file.
A complete repository definition is:</p>

<div id="code-oneapidnf" class="codeblock">
<pre>
[oneAPI]
name=Intel® oneAPI repository
baseurl=https://yum.repos.intel.com/oneapi
enabled=1
gpgcheck=0
repo_gpgcheck=0
gpgkey=https://yum.repos.intel.com/intel-gpg-keys/GPG-PUB-KEY-INTEL-SW-PRODUCTS.PUB
priority=150
</pre>
</div>

<h2 id="installing-packages">Installing Packages</h2>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Intel has now fixed their RPM signing as of oneAPI 2024. The older versions still have an invalid package signature though, so the work arounds listed here are only needed for installing older oneAPI packages from the RPM repository.</div>

<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning:</b> This change will disable all package verification for all repositories/RPMs on the system. It should only be done if you completely trust all repositories on your system.</div>

<p>Once the repository GPG-key is ignored, DNF produces further errors when trying to install the packages.
These errors are generated by RPM itself, and look like</p>

<div id="code-rpmerror" class="codeblock">
<pre>
package intel-basekit-2023.1.0-46401.x86_64 does not verify: RSA signature: BAD (package tag 1002: invalid OpenPGP signature)
package intel-hpckit-2023.1.0-46346.x86_64 does not verify: RSA signature: BAD (package tag 1002: invalid OpenPGP signature)
</pre>
</div>

<p>These errors are caused by the new <code class="language-plaintext highlighter-rouge">rpm-sequoia</code> cryptography backend becoming stricter with PGP keys meeting the appropriate standards, and rejecting keys that do not meet them <a href="https://github.com/rpm-software-management/rpm/issues/2351" target="_blank">(GitHub issue)</a>.
In order to allow DNF to install these packages, RPM needs to relax the cryptography signature checks to allow these signatures through.</p>

<p>Currently, the workaround is to globally disable all package signature verification in rpm.
This can be done by adding <code class="language-plaintext highlighter-rouge">%_pkgverify_level none</code> to the file <code class="language-plaintext highlighter-rouge">/etc/rpm/macros.verify</code>.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <!--<h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/technotes/oneapi-f38/" class="twitter" title="Share on Twitter"><i class="fas fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/technotes/oneapi-f38/" class="facebook" title="Share on Facebook"><i class="fas fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/technotes/oneapi-f38/" class="google-plus" title="Share on Google Plus"><i class="fas fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>-->
</div><!-- /.social-share -->

        
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <footer>
    

<span>&copy; 2024 Ian McInerney. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://ncsu-libraries.github.io/jekyll-academic/" rel="nofollow">Jekyll Academic</a> theme.
<br /></span>


  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>




</body>
</html>
